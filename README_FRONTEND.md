# Higgs Audio v2 前端重构说明

## 概述
基于新的 main.py API 结构，已完全重构前端代码，支持所有新的功能特性。

## 新功能特性

### 1. 统一主页 (index.html)
- **多功能模式切换**：基础TTS、语音克隆、多说话人对话、实验模式、长文本、语音管理
- **配置管理**：保存和加载不同的参数配置
- **进度显示**：动态进度条和状态显示
- **语音管理**：系统语音列表查看和上传

### 2. 基础语音生成 (generate.html)
- 调用 `POST /generate` 端点
- 支持基本的文本转语音功能
- 包含完整的参数调节

### 3. 语音克隆 (voice-clone.html)  
- 调用 `POST /generate/voice-clone` 端点
- 支持上传音频文件或选择预设语音
- 支持跨语言语音克隆选项

## 新API端点支持

### 基础功能
- `GET /health` - 系统健康检查
- `GET /voices` - 获取可用语音列表
- `POST /generate` - 基础TTS生成

### 高级功能
- `POST /generate/voice-clone` - 零样本语音克隆
- `POST /generate/multi-speaker` - 多说话人对话生成
- `POST /generate/experimental` - 实验模式（哼唱、BGM）
- `POST /generate/long-form` - 长文本分块生成
- `POST /upload-voice` - 上传自定义语音

## 技术改进

### 1. 模块化设计
- 统一的API调用处理
- 可复用的组件和函数
- 清晰的错误处理机制

### 2. 用户体验
- 响应式设计适配移动设备
- 实时进度反馈
- 拖拽上传支持
- 键盘快捷键支持

### 3. 配置管理
- 自动保存用户设置
- 命名配置保存和加载
- 默认参数重置

## 使用说明

### 启动服务器
```bash
python main.py --host 0.0.0.0 --port 8000
```

### 访问前端
- 主页：http://localhost:8000/frontend/index.html
- 基础生成：http://localhost:8000/frontend/generate.html  
- 语音克隆：http://localhost:8000/frontend/voice-clone.html

### 主要功能操作

#### 1. 基础TTS
1. 选择"基础TTS"模式
2. 输入要合成的文本
3. 调整生成参数
4. 点击"生成语音"

#### 2. 语音克隆
1. 选择"语音克隆"模式
2. 选择预设语音或上传音频文件
3. 输入要克隆生成的文本
4. 启用跨语言选项（如需要）
5. 点击"克隆语音"

#### 3. 多说话人对话
1. 选择"多说话人"模式
2. 配置多个说话人的语音
3. 输入对话文本（使用[SPEAKER0]、[SPEAKER1]标记）
4. 设置分块参数
5. 点击"生成多说话人对话"

#### 4. 实验模式
1. 选择"实验模式"
2. 选择实验类型（哼唱/背景音乐）
3. 选择参考语音
4. 输入相应文本
5. 点击"生成实验音频"

#### 5. 长文本生成
1. 选择"长文本"模式
2. 输入长文本内容
3. 设置分块方式和参数
4. 选择参考语音
5. 点击"生成长文本语音"

#### 6. 语音管理
1. 选择"语音管理"模式
2. 查看系统中可用的语音
3. 上传新的语音文件
4. 检查系统健康状态

## 配置选项

### 基本参数
- **Temperature** (0.0-2.0): 控制生成的随机性
- **Top P** (0.0-1.0): 核采样参数
- **Top K**: 限制采样词汇数量
- **最大Token数**: 限制生成长度
- **随机种子**: 确保结果可重现

### 高级选项
- **场景描述**: 为生成提供上下文
- **跨语言克隆**: 支持不同语言间的语音克隆
- **分块处理**: 对长文本进行智能分割
- **缓冲区管理**: 优化长文本生成的连贯性

## 错误处理
- 网络连接错误提示
- 参数验证和提示
- 文件格式检查
- 服务器状态监控

## 浏览器兼容性
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+
- 移动端浏览器支持

## 注意事项
1. 确保API服务器地址正确配置
2. 上传的音频文件建议3-30秒，小于50MB
3. 跨语言克隆功能需要合适的参考语音
4. 多说话人模式需要使用正确的标记格式
5. 长文本生成可能需要较长时间，请耐心等待